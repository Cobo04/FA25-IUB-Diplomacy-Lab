{% extends "dashboard_template.html" %}

{% block title %}Dashboard{% endblock %}

{% block dashboard_content %}

<div class="dashboard-grid">
    <div class="main-grid">
        <div class="welcome-box">
            <h1 class="welcome-text">Welcome to the SPACE Dashboard!</h1>
            <p class="welcome-subtext">Here you can find an overview of various research statistics and insights.<br>Select a visualization technique from the sidebar to get started.</p>
            <p class="blame-awesome">V1.5 of the SPACE Dashboard is now live! Effortlessly add, edit, and remove companies & SPACE scores.</p>
        </div>
        <div class="stats-row">
            <div class="stat-box">
                <h1 class="side-box-title">Connections Discovered</h1>
                <h2 class="stat-number">0</h2>
            </div>
            <div class="stat-box">
                <h1 class="side-box-title">Companies Analyzed</h1>
                <h2 class="stat-number">{{ total_companies }}</h2>
                 <!-- <h2 class="stat-number">0</h2> -->
            </div>
            <div class="stat-box">
                <h1 class="side-box-title">SPACE Scores Generated</h1>
                <h2 class="stat-number">{{ total_space_scores }}</h2>
            </div>
        </div>
    </div>

    <div class="side-box">
        <h1 class="side-box-title">Server Statistics</h1>
        <ul class="stats-list">
            <li class="stats-item">Server Status: <span class="{{ server_connection[1] }}">{{ server_connection[0] }}</span></li>
            <li class="stats-item">Database Connection: <span class="{{ db_connection[1] }}">{{ db_connection[0] }}</span></li>
            <li class="stats-item">Map Connection: <span class="{{ map_connection[1] }}">{{ map_connection[0] }}</span></li>
            <li class="stats-item">Maltego Connection: <span class="{{ maltego_connection[1] }}">{{ maltego_connection[0] }}</span></li>
            <li class="stats-item">Total SPACE Calls: {{ total_api_calls }}</li>
            <li class="stats-item">Server Time: {{ server_time }}</li>
        </ul>

        <div class="buttonGroup">
            <button class="refresh-button" onclick="location.reload();">Refresh Statistics</button>
            <a class="admin-link" href="{{ url_for('admin') }}">Administrator Panel</a>
        </div>
    </div>
</div>
{% endblock %}